[
  {
    "name": "cpu 5 分钟内负载过高",
    "note": "当 cpu 负载接近 0.7 cpu 核数时代表当前负载已经过高需要解决",
    "severity": 2,
    "disabled": 1,
    "prom_for_duration": 60,
    "prom_ql": "avg (node_load5) by (instance)/count(count(node_cpu_seconds_total) by (cpu,instance)) by (instance) > 0.7",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "linux inode 使用超过 90% - node exporter",
    "note": "",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(100 - ((node_filesystem_files_free * 100) / node_filesystem_files))>90",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "linux inode 使用超过 90% - node exporter",
    "note": "",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(100 - ((node_filesystem_files_free * 100) / node_filesystem_files))>90",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "linux 内存使用量超过 75%",
    "note": "扩容或者迁移服务",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(node_memory_MemTotal_bytes - node_memory_MemFree_bytes - (node_memory_Cached_bytes + node_memory_Buffers_bytes))/node_memory_MemTotal_bytes*100 > 75",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "内存严重不足已超过 95%",
    "note": "",
    "severity": 1,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(node_memory_MemTotal_bytes - node_memory_MemFree_bytes - (node_memory_Cached_bytes + node_memory_Buffers_bytes))/node_memory_MemTotal_bytes*100 > 95",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "linux 文件句柄使用 90% - node exporter",
    "note": "You can increase the file handle limit or expand the capacity",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(node_filefd_allocated/node_filefd_maximum*100) > 90",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "磁盘出现读写错误",
    "note": "很可能是磁盘出现损坏",
    "severity": 1,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(node_filesystem_device_error{mountpoint!~\"/var/lib/.*\",mountpoint!~\"/run.*\"}) > 0",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "磁盘空间严重不足超过 92%",
    "note": "",
    "severity": 1,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "(100 - ((node_filesystem_avail_bytes{fstype=~\"ext3|ext4|xfs|nfs\"} * 100) / node_filesystem_size_bytes{fstype=~\"ext3|ext4|xfs|nfs\"}) ) > 92 ",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "系统 oom",
    "note": "",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "increase(node_vmstat_oom_kill[1m]) > 0",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "最近两分钟入站的流量超过 120MB",
    "note": "",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "sum by (instance) (rate(node_network_receive_bytes_total{device != \"lo\"}[2m])) / 1024 / 1024 > 120",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "主机 tcp 连接数超过 1 万",
    "note": "",
    "severity": 2,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "node_sockstat_TCP_tw > 10000",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "主机 tcp 连接数超过 5 千",
    "note": "",
    "severity": 3,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "node_sockstat_TCP_tw > 5000",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  },
  {
    "name": "主机运行进程超过 1000",
    "note": "",
    "severity": 3,
    "disabled": 1,
    "datasource_ids:": [
      1
    ],
    "prom_for_duration": 60,
    "prom_ql": "node_procs_running > 1000",
    "prom_eval_interval": 15,
    "enable_stime": "00:00",
    "enable_etime": "23:59",
    "enable_days_of_week": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "0"
    ],
    "enable_in_bg": 0,
    "notify_recovered": 1,
    "notify_channels": [
      "dingtalk"
    ],
    "notify_groups": [
      "1"
    ],
    "notify_repeat_step": 60,
    "recover_duration": 0,
    "callbacks": [],
    "runbook_url": "",
    "append_tags": []
  }
]